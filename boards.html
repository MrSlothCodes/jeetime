<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Padhle</title>
  <script src="script.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="countdown">
    <div class="days"></div>
    <div class="hours"></div>
    <div class="left"> Left For Boards 24</div>
  </div>
  <button value="butt" class="butt" onclick="window.location.href = 'index.html'">JEE-M</button>
  <div class="form-floating">
    <textarea class="form-control" placeholder="Notes" Id="not"
      style="width:25em; height: 5em; margin-top: 50px;font-size: 2em;"></textarea>
    <br><button value="sub" id="sub" class="sub">Submit</button>
  </div>

  <div id="Notes" class="my4">
    <h2>Notes</h2>
    <table class="table" >
      <thead>
        <tr>
          <th scope="col">SNO</th>
          <th scope="col">Note</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody id="tbody">
        <tr>
          <th scope="row">1</th>
          <td>Mark</td>
          <td><button class="dlt">delete</button></td>
        </tr>

      </tbody>

    </table>
  </div>

  <script>
    let endDate = new Date("2024-02-20T09:00:00Z");
    let now = new Date();
    let remainingTime = endDate - now;

    function updateCountdown() {

      let days = Math.floor(remainingTime / (1000 * 60 * 60 * 24));
      let hours = Math.floor((remainingTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      let minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));

      document.querySelector(".days").innerHTML = days + " Days";
      document.querySelector(".hours").innerHTML = hours + " Hr " + minutes + " Min ";

    }
    setInterval(updateCountdown, 1000);
    //notesss
    function update() {
      if (localStorage.getItem('itemsJson') == null) {
        itemJsonArray = [];
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      }
      else
      {
        itemJsonArrayStr = localStorage.getItem('itemsJson');                        
        itemJsonArray = JSON.parse(itemJsonArrayStr);
      }
      //imperginating  the table
      tbody = document.getElementById('tbody')
      let str = "";
      itemJsonArray.forEach((element, index) => {
        str += `
    <tr>
      <th scope="row">${index + 1}</th>
      <td>${element[0]}</td>
      <td><button class="dlt" onclick="dele(${index})">delete</button></td>
    </tr>
    `
   
      });
      tbody.innerHTML = str;

    }
    function getAndUpdate()
    {
      note = document.getElementById('not').value;
      console.log(note)
      console.log("Zzz  ");

      if (localStorage.getItem('itemsJson') == null) {
        itemJsonArray = [];
        itemJsonArray.push([note]);
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      }
      else {
        itemJsonArrayStr = localStorage.getItem('itemsJson')
        itemJsonArray = JSON.parse(itemJsonArrayStr);
        itemJsonArray.push([note]);
        localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))

      }
      update();
    }
    sub = document.getElementById('sub');
    sub.addEventListener("click", getAndUpdate);
    update();
    function dele(itemIndex){
      console.log("eureka",itemIndex);
      itemJsonArrayStr = localStorage.getItem('itemsJson')
      itemJsonArray = JSON.parse(itemJsonArrayStr);
      itemJsonArray.splice(itemIndex,1)
      localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
      update();
    }
  </script>
</body>

</html>